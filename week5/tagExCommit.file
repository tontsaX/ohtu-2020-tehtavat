delete and commit then write to a file
